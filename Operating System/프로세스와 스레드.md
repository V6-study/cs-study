> process : 실행 중인 프로그램의 인스턴스, 자체적인 메모리 공간과 자원을 가지며 높은 수준의 격리  
> thread: 프로세스 내에서 실행되는 작업의 흐름 단위, 프로세스의 자원을 공유하며 효율적인 병렬 처리와 빠른 컨텍스트 스위칭

**스레드의 탄생**

하나의 프로세스가 동시에 여러 작업을 수행하지 못하는 단점이 존재

프로세스를 여러개 띄워 다중 작업(멀티 프로세스)을 진행할 수는 있지만 다음과 같은 단점이 존재함

-   프로세스끼리는 데이터 공유가 까다로움
-   높은 컨텍스트 스위칭 비용

> Context Switching: CPU에서 실행 중이던 프로세스/스레드가 다른 프로세스/스레드로 교체되는 것

<p align="center">
  <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbxP22C%2FbtsJ7Oouzrg%2FJj0dOO2VRc8qYjqaMhtDAK%2Fimg.png" alt="프로세스 구조" />
</p>

**프로세스는 독립적인 메모리 공간을 할당**받기 때문

**단일 프로세스** 내에서 **여러 작업을 동시에 처리**하기 위해 도입

---

기본적으로 **프로세스 1개당 1개 이상의 스레드**를 할당 받으며

스레드의 개수에 따라 싱글 스레드, 멀티 스레드로 구분

<p align="center">
  <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbDtSl7%2FbtsJ917cLah%2FZp3xzKGTTiU5IEwYkEnkU0%2Fimg.png" alt="메모리 구조" />
</p>

> Program Counter: 다음 번에 실행되어야 할 명령어가 있는 메모리 주소를 가리키며, 다음에 실행할 명령어의 위치를 저장하는 레지스터

-    Code(text)
    -   프로그램의 실행 코드가 저장된 영역으로 읽기 전용
-   Data
    -   전역 변수와 정적 변수가 저장
-   Heap
    -   동적으로 할당되는 메모리 영역
-   Stack
    -   함수 호출 정보, 지역변수, 매개변수 등이 저장되며, 각 스레드마다 독립적으로 할당

같은 프로세스에 속한 **스레드**는 **해당 프로세스의 메모리 영역을 공유**

각각의 **프로세스**는 **독립된 메모리 공간을 할당 받으며, 명령어들과 데이터를 가짐**

**스레드**는 **프로세스의 자원을 공유 받으며 스레드만의 고유한 영역 또한 존재**(pc, stack)

-   같은 프로세스 내에서의 스레드 간 컨텍스트 스위칭이 가벼워짐
    -   메모리 영역을 공유하기 때문에 스택 영역만 교체하면 되기 때문

멀티스레드 환경에서 한 스레드가 공유 데이터를 손상시키면 모든 스레드에 영향을 줄 수 있음

-   Critical Section 기법을 통해 대비
    -   상호 배제
        -   하나의 스레드가 임계 구역에서 실행되고 있다면, 다른 스레드들은 임계 구역에서 실행될 수 없음
    -   진행
        -   임계 구역에 실행되고 있는 스레드가 없을 경우, 들어갈 스레드를 적절히 선택해줘야함
    -   한정된 대기
        -   여러 스레드가 공유 자원을 사용하려고 할 때 일부 스레드가 계속해서 자원을 얻지 못하는 상황을 방지하기 위해, 한번 임계 구역에서 실행된 프로세스는 다음 실행에 대한 제한을 두어야 함

---

하드웨어 스레드와 운영체제 스레드의 관계

<p align="center">
  <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FcE8yc3%2FbtsJ8Wr4Zv5%2Fq4PKMWVv9bTHPdVtsJkhkK%2Fimg.png" alt="cpu 제원" />
</p>

**하이퍼 스레딩**이라는 기술을 통해 물리적 코어가 두 개 이상의 스레드를 동시에 처리할 수 있음

-   하드웨어의 스레드는 CPU의 동시 처리 능력을 나타냄

운영체제는 하드웨어 스레드 수보다 훨씬 많은 소프트웨어 스레드를 관리할 수 있음

-   **시분할 방식**으로 여러 스레드를 번갈아 실행하기 때문
    -   여러 사용자나 프로세스가 하나의 컴퓨터 자원을 시간적으로 분할하여 사용하는 방식
    -   이러한 방식으로 운영체제는 제한된 CPU 자원을 효율적으로 사용하고, 사용자에게 여러 작업이 동시에 실행되는 것처럼 보이게 함
