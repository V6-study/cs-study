# 프로세스의 메모리 구조



- 프로그램이 실행될 때 운영체제가 프로세스에 할당하는 메모리 공간을 의미

## 정적할당



```bash
- 컴파일 단계에서 메모리를 할당하는 것
- BSS segment, Data segment, code/text segment로 나뉘어 저장
```

- Data segment
    - **초기화된 전역 변수와 정적 변수**가 저장되는 공간
        - 초기화된 데이터 영역
        - 초기화되지 않은 데이터 영역 (BSS segment)
- code/text segment
    - **프로그램의 코드**가 저장되는 영역
    - 읽기 전용이며, 일반적으로 실행 가능한 명령어들이 여기에 저장
    - 메모리 상에서 가장 낮은 주소에 위치
    - 모든 프로세스가 공유 (다중 쓰레드 환경)

## 동적할당


```bash
- 런타임 단계에서 메모리를 할당 받는 것
- stack 과 heap으로 나누어짐
```

- stack
    - **함수 호출 시 생성되는 지역 변수, 매개변수, 리턴 주소** 등이 저장되는 공간
    - 함수 호출 시 메모리가 할당되고 함수가 종료되면 할당된 메모리가 해제
    - 스택 오버플로우
        - 스택의 크기는 정해져 있으며, **스택 메모리 영역의 한계를 초과했을 때** 발생
        - e.g. 재귀함수 호출
- heap
    - 동적으로 할당되는 변수를 담음
    - malloc(), free() 함수를 통해 관리할 수 있음 (C언어 함수)
        - `malloc()` 함수
            - memory allocation은 힙에서 지정한 크기만큼의 메모리를 **동적으로 할당**하는 함수
        - `free()`
            - `malloc()`을 통해 힙에서 할당한 메모리를 반환(해제)하는 함수
    - 자료구조의 경우 heap영역을 사용함
    - 런타임시 크기 결정 → 메모리 할당 후 프로그래머가 직접 해제
