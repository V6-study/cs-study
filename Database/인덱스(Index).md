# Database Index

## 목적
데이터베이스 검색 연산 성능을 향상시키기 위한 자료구조

## 파일 구성
테이블 생성 시 3가지 파일이 생성된다:

- FRM: 테이블 구조 저장 파일
- MYD: 실제 데이터 파일  
- MYI: Index 정보 파일 (Index 사용 시 생성)

## 동작
테이블의 데이터를 직접 탐색하는 대신, 인덱스 구조를 참조해 필요한 데이터의 위치를 빠르게 찾는다. 대부분 B-트리 또는 B+ 트리 구조로 인덱스를 구현하며, 이는 데이터를 정렬된 상태로 유지하고 삽입/삭제/검색에 효율적이다. SELECT 쿼리의 WHERE 조건, JOIN, ORDER BY, GROUP BY 등에서 유용하게 사용된다.


## 장점

### 1. 검색 속도 향상
테이블 전체를 검색하는 Full Table Scan 대신 인덱스를 사용하면 필요한 데이터에 직접 접근할 수 있어 조회 속도가 빨라진다.

### 2. 데이터 정렬 도움
인덱스가 정렬된 형태로 저장되기 때문에 정렬이 필요한 작업에 추가 비용이 줄어든다.

### 3. 중복 방지
Unique Index를 사용하면 특정 열에 중복된 값이 삽입되지 않도록 보장한다.


## 단점

### 1. 추가 저장 공간 필요

### 2. 데이터 삽입/수정/삭제 속도 저하
- INSERT: 테이블에는 입력 순서대로 저장되지만, 인덱스 테이블에는 정렬하여 저장하기 때문에 성능 저하 발생
- DELETE: 테이블에서는 삭제돼도 인덱스 테이블에는 남아있어 쿼리 수행 속도 저하 가능
- UPDATE: 인덱스에는 UPDATE가 없어 DELETE, INSERT 두 개의 작업을 수행하여 부하 발생

### 3. 불필요한 인덱스의 성능 저하
과도한 인덱스 생성은 오히려 쿼리 최적화에 악영향을 미친다.


## 종류

### 1. 기본 인덱스 (Primary Index)
기본 키(Primary Key)에 의해 자동으로 생성되는 인덱스로, 각 테이블에 하나만 존재하며 고유성과 비어 있지 않은 값을 보장한다.

### 2. 고유 인덱스 (Unique Index)
특정 열에 대해 중복을 허용하지 않는 인덱스이다.

### 3. 클러스터형 인덱스 (Clustered Index)
데이터가 인덱스 순서에 따라 물리적으로 정렬된 구조로, 각 테이블에 하나만 생성 가능하며 데이터 자체가 정렬되므로 빠른 검색이 가능하다.

### 4. 비클러스터형 인덱스 (Non-Clustered Index)
데이터는 정렬되지 않고 인덱스는 데이터 위치를 참조하며, 한 테이블에 여러 개 생성할 수 있다.

### 5. 복합 인덱스 (Composite Index)
여러 열을 결합해 하나의 인덱스를 생성한다. 예: `(name, age)` 와 같이 두 열에 대해 인덱스 생성

### 6. 해시 인덱스 (Hash Index)
해시 함수를 사용하여 데이터를 검색하며, 등호(=) 검색에 최적화되어 있지만 범위 검색에는 적합하지 않다. 예: `WHERE age BETWEEN 20 AND 30`

### 7. 텍스트 인덱스 (Full-Text Index)
대량의 텍스트 데이터를 검색하는데 최적화된 인덱스로, 검색 엔진에서 특정 키워드를 빠르게 검색할 때 사용한다.


## Q) B+ Tree를 사용하는 이유?

### 1. 범위 검색
해시 테이블은 동등 연산에 특화된 자료구조로, 데이터가 정렬되지 않아 범위 검색을 지원하지 않는다.

### 2. 성능
B-트리는 균형 트리 구조로 설계되어 데이터가 많아져도 검색, 삽입, 삭제 작업이 모두 **O(log n)** 시간 복잡도로 수행된다. 트리의 높이를 균형 있게 유지하므로 최악의 경우에도 성능 저하가 적다. 반면 해시 테이블은 키 충돌이 발생하면 체이닝 또는 오픈 어드레싱을 사용해 해결해야 하는데, 충돌이 많아지면 최악의 경우 O(n)에 가까운 성능 저하가 발생한다.

### 3. 다양한 쿼리 지원
B-트리는 단일 값 검색뿐 아니라, 접두사 검색(prefix search), 범위 검색, 최솟값/최댓값 찾기, 정렬 데이터 추출 등 다양한 쿼리에 대응한다.

### 4. 메모리 효율성과 디스크 접근 최적화
B-트리는 블록 단위로 데이터를 저장하며, 한 번의 디스크 읽기로 여러 데이터를 로드하므로 디스크 접근이 효율적이다. 데이터베이스는 메모리보다 느린 디스크 I/O를 줄이는 것이 중요하다.
